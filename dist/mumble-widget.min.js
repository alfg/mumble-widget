/*
 *  mumble-widget - v0.1.0
 *  Mumble Channel Viewer Widget
 *  http://github.com/alfg/mumble-widget
 *
 *  Made by Alfred Gutierrez
 *  Under MIT License
 */
!function(){function a(){$.getScript("//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js",function(){console.log("Loading knockout.js..."),b()}),c=window.jQuery.noConflict(!0),c.ajaxSetup({async:!1})}function b(){c(document).ready(function(a){function b(){var b=this;b.cvp=ko.observable(),b.userCount=ko.observable();var c=function(){a.ajax({url:l,async:!0,dataType:"jsonp",success:function(a){console.log(a),b.cvp(a),b.userCount(d(a))},error:function(a){console.log(a)}})},d=function(a){var b=a.root.users.length,c=function(a){for(var d in a)if(a.hasOwnProperty(d)&&"object"==typeof a[d]){if("channels"===d)for(var e=0;e<a[d].length;e++){var f=a[d][e].users.length;b+=f}c(a[d])}};return c(a.root),b};setInterval(function(){c()},15e3),b.cvp(c())}var c=a(".mumble-widget"),d=c.data("key"),e=c.data("width")||500,f=c.data("source")||"//guildbit.com/server/cvp/"+d+"/json/?callback=?",g=c.data("theme")||"default",h="../src/mumble-widget.css",i="../src/template.html";a("#mumble-widget-container").width(e);var j=a("<link>",{rel:"stylesheet",type:"text/css",href:h});j.appendTo("head");var k,l=f;a.get(i,function(b){k=b;var c=a("#mumble-widget-container");c.html(k),c.addClass(g)}),ko.applyBindings(new b)})}var c;if(void 0===window.jQuery||"2.1.1"!==window.jQuery.fn.jquery){var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src","//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"),d.readyState?d.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&a()}:d.onload=a,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(d)}else c=window.jQuery,b()}();